<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- com.oracle.s202350101.뒤에 매핑하고 싶은 모델쓰면 됩니다 
	 mapper 여러개 쓰셔도 됩니다. -->
	 
<mapper namespace="com.oracle.oBootMybatis01.PostMapper">  <!-- Mapper 왜 썼는지 구글 검색 -->
	
	<!-- 전체 리스트 갯수 -->
	<select id="postListTotalCount" resultType="int">
		select count(*) from post where isdeleted = '1'
	</select>
	
	
	<!-- 전체 리스트  -->
	<select id="selectPost" resultType="Post">
		select * from post where isdeleted = '1' order by postno asc
	</select>
	
	
	<!-- 상세 페이지 -->
	<select id="contentPost" parameterType="int" resultType="Post">
		select  *
		from    post
		where   isdeleted = '1'
		and     postno = #{postno}
	</select>
	
	
	<!-- 해당 글 삭제 -->
	<update id="deletePost" parameterType="int">  
		update post set isdeleted = '0' where postno = #{postno}
	</update>
	
	
	<!-- 해당 글 수정 -->
	<update id="updatePostForm" parameterType="Post">
		update 	post 
		set 	postname = #{postName}, postcontent = #{postContent}, isdeleted = #{isDeleted}, createDate = sysdate  
		where 	postno = #{postNo}
	</update>
	
	
	<!-- 새 글 입력 -->
	<insert id="insertPostForm" parameterType="Post">
		insert into post (postno, postname, postcontent, createdate, isdeleted)
				values ((select nvl(max(postno), 0) + 1 from post), #{postName}, #{postContent}, sysdate, '1')
	</insert>
	
	
	
</mapper>
